/*!
 * pleasure-ui-vue v1.0.0
 * (c) 2018-2019 Martin Rafael Gonzalez <tin@devtin.io>
 * Released under the MIT License.
 */
var VuePleasure=function(e,t,a,n,l,s,i,d,r,o,p,c,u,f,m,h){'use strict';function y(e,{app:t,store:a,noCoerce:n=!1}={}){if(e.prototype.$pleasureApiClient=A,a?a.registerModule("pleasure",B):(e.use(h),a=new h.Store({modules:{pleasure:B}})),A.on("login",e=>{M.set("accessToken",A.accessToken),a.commit("pleasure/setUser",e)}),A.on("logout",()=>{M.remove("accessToken"),a.commit("pleasure/setUser",null)}),!process.server){const e=new H,t=()=>(e.clearAll(),a.dispatch("pleasure/clearDropdowns"),a.dispatch("pleasure/syncEntities"));A.cache(e),A.on("logout",t),A.on("login",t)}n||e.mixin(f),e.mixin({components:Object.assign({},me,{pleasure:D}),filters:{lang(e){return e}},computed:{$pleasure(){const e=this;return{error(t){e.$message({message:e.$t(t),type:"error"})},api:A,settings:a.getters["pleasure/settings"],dropdown:a.getters["pleasure/dropdown"],entities:a.getters["pleasure/entities"],user:a.getters["pleasure/user"],setHeadbarTitle(e){Z.$emit("pleasure-headbar",{exec:["setTitle",e]})}}}}}),A.on("profile-update",e=>{a.dispatch("pleasure/changeUserProfile",e)}),process.client&&(a.dispatch("pleasure/syncEntities"),A.on("update",e=>{a.dispatch("pleasure/dropdownChanged",e)}))}t=t&&t.hasOwnProperty("default")?t["default"]:t,a=a&&a.hasOwnProperty("default")?a["default"]:a,n=n&&n.hasOwnProperty("default")?n["default"]:n,l=l&&l.hasOwnProperty("default")?l["default"]:l,s=s&&s.hasOwnProperty("default")?s["default"]:s,i=i&&i.hasOwnProperty("default")?i["default"]:i,d=d&&d.hasOwnProperty("default")?d["default"]:d,o=o&&o.hasOwnProperty("default")?o["default"]:o,p=p&&p.hasOwnProperty("default")?p["default"]:p,c=c&&c.hasOwnProperty("default")?c["default"]:c,u=u&&u.hasOwnProperty("default")?u["default"]:u,f=f&&f.hasOwnProperty("default")?f["default"]:f,m=m&&m.hasOwnProperty("default")?m["default"]:m,h=h&&h.hasOwnProperty("default")?h["default"]:h;var b={props:{i18nScope:{type:String,default:null},formId:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{formComponent(){return"el-form"}}},g=function(e,t,a,n,l,s,i,d,r,o){"boolean"!=typeof i&&(r=d,d=i,i=!1);var p="function"==typeof a?a.options:a;e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,l&&(p.functional=!0)),n&&(p._scopeId=n);var c;if(s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=c):t&&(c=i?function(){t.call(this,o(this.$root.$options.shadowRoot))}:function(e){t.call(this,d(e))}),c)if(p.functional){var u=p.render;p.render=function(e,t){return c.call(t),u(e,t)}}else{var f=p.beforeCreate;p.beforeCreate=f?[].concat(f,c):[c]}return a};var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-form"},[a(e.formComponent,{key:e.formId,tag:"component",on:{input:function(t){return e.$emit("input",t)}}},[e._t("default")],2)],1)};_._withStripped=!0;var $=g({render:_,staticRenderFns:[]},void 0,b,void 0,!1,void 0,void 0,void 0),v={props:{i18nScope:{type:String,default:null},field:{type:Object,required:!0}},computed:{theProps(){const e={};return"array"===this.componentType&&Object.assign(e,{options:this.field.enumValues}),Object.assign({},this.$props,e,get(this.field,"$pleasure",{}))},fieldContainer(){return"element-ui"===this.$pleasure.settings.ui?"el-form-item":"div"}}};var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-field-container"},[a(e.fieldContainer,{tag:"component",attrs:{required:e.field.$pleasure.required,disabled:e.field.$pleasure.disabled,label:e.field.$pleasure.label}},[e._t("default")],2)],1)};w._withStripped=!0;var S=g({render:w,staticRenderFns:[]},void 0,v,void 0,!1,void 0,void 0,void 0),C={props:{i18nScope:{type:String,default:null},formValues:{type:Object,default:void 0},value:{type:[String,Number,Object,Array,Date,Boolean],default:""},field:{type:Object,required:!0}},data(){return{defaultProps:{"el-slider":{range:!0,showStops:!0,max:10}}}},computed:{theProps(){const e={};return"array"===this.componentType&&Object.assign(e,{options:this.field.enumValues}),s.all([{},this.$props,this.defaultProps[this.fieldComponent]||{},e,l(this.field,"$pleasure",{})])},componentType(){const e=l(this.field,"$pleasure.component",l(this.field,"component"));return!e&&(this.field.enumValues&&0<this.field.enumValues.length||"Array"===this.field.instance)?"array":a(e||"input")},fieldComponent(){switch(this.componentType){case"array":return"pleasure-select";case"multiple-select":return"pleasure-multiple-select";case"date":return"el-date-picker";case"date-time":return"pleasure-date-time";case"range":return"el-slider";default:return"el-input";}}}};var k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-field"},[a(e.fieldComponent,e._b({tag:"component",attrs:{name:e.field.path},on:{input:function(t){return e.$emit("input",t||null)}}},"component",e.theProps,!1))],1)};k._withStripped=!0;var x=g({render:k,staticRenderFns:[]},void 0,C,void 0,!1,void 0,void 0,void 0),P={props:{actionCallback:{type:Function,default(){}},cancelCallback:{type:Function,default(){}},actionLabel:{type:String,default:"Create"},cancelLabel:{type:String,default:"Cancel"},formVisible:{type:Boolean,default:!0},actionDisabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:`messages.loading`},method:{type:String,required:!0},cancelable:{type:Boolean,required:!0}}};var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-form-controls"},[e.formVisible?a("el-button",{staticClass:"full-btn",attrs:{name:"update"===e.method?"update":"create",disabled:e.actionDisabled,loading:e.loading,type:"primary","native-type":"submit"},nativeOn:{click:function(t){return t.preventDefault(),e.actionCallback(t)}}},[e._v("\n    "+e._s(e._f("lang")(e.actionLabel))+"\n  ")]):e._e(),e._v(" "),e.cancelable?a("el-button",{staticClass:"full-btn",nativeOn:{click:function(t){return t.preventDefault(),e.cancelCallback(t)}}},[e._v("\n    "+e._s(e.cancelLabel)+"\n  ")]):e._e()],1)};O._withStripped=!0;var I=g({render:O,staticRenderFns:[]},void 0,P,void 0,!1,void 0,void 0,void 0);const R={type:Function,default(){return()=>{}}};var E={props:{customBehavior:{type:Boolean,default:!1},tableTop:{type:Number,default:0},searchSpan:{type:Number,default:24},searchBy:Array,searchStrict:{type:Boolean,default:!1},defaultSort:{type:Object},withSearch:{type:Boolean,default:!0},canEdit:Boolean,canAdd:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!1},entity:{type:String,required:!0},cellClick:R,rowClick:{type:[Function,Boolean],default:!0},rowClassName:Function,action:R,appendData:Object},data(){return{loadingMore:!1,sort:null,tableScroll:null,searchResults:null,selections:[],search:null}},computed:{indexes(){return this.$pleasure.entities[this.entity]?i(this.$pleasure.entities[this.entity].$pleasure.index.search.concat(this.$pleasure.entities[this.entity].$pleasure.index.sort).filter(e=>"_id"!==e)):[]},fields(){return this.indexes},sortValue(){return this.sort?{[this.sort.prop]:"ascending"===this.sort.order?1:-1}:null},tableStyle(){let e=this.tableTop;return this.withSearch&&(e+=40),this.withSearch?{top:e}:null},datatable(){return null===this.searchResults?this.$pleasure.dropdown[this.entity]||[]:this.searchResults},safeLookUp(){return debounce(this.lookUp.bind(this),150)}},mounted(){console.log(`entity>>>`,this.$pleasure.entities[this.entity])},methods:{guessLabel(e){const t=`entities.label.${e}`,a=this.$t(t);return t===a?n(e):a},async reload(){if(this.entity)return console.log(`reloading`,this.entity),this.loadMore(!0)},getSearch(){let e={};if(!this.searchBy||0===this.searchBy.length)e={search:this.search};else if(this.search){const t={};this.searchBy.forEach(e=>{t[e]=this.search}),e={find:t,strict:this.searchStrict.toString()}}return e},async handleSortChange(e){this.entity&&(this.sort=e,this.$emit("sort-change",e),console.log(`table sort`))},handleScroll(){const{tableScroll:e}=this,t=e.scrollHeight-e.offsetHeight,a=e.scrollTop;a>=t&&this.loadMore()},async loadMore(e){return console.log(`loadMore`)},promptCreate(){this.$router.push({path:`/pleasure/create/${this.entity}`})},handleDeleteSelection(){this.$confirm(this.$t("confirm.remove.default")).then(()=>{this.deleteSelection()}).catch(()=>{})},async lookUp(){if(!this.search)return this.$set(this,"searchResults",null);this.searching=!0;try{const{data:e}=await this.$store.dispatch("db/api",{model:this.entity,params:this.appendData,...this.getSearch()});this.$set(this,"searchResults",e)}catch(e){}finally{this.searching=!1}},async deleteSelection(){this.loading=!0;const e=this.selections.map(e=>e._id),t=this.entity,{errorObj:a}=await this.$store.dispatch("db/api",{model:t,remove:e,ctx:this});this.$emit("deleted",e),a||(await this.$store.dispatch(`db/dropdown`,{model:t})),this.loading=!1},filterTag(e,t){return t.type===e},handleSelectionChange(e){this.$set(this,"selections",e||[])},handleRowClick(e,t,a){return!1===this.rowClick?void 0:"function"==typeof this.rowClick?this.rowClick(e,t,a):void this.$router.push({path:`/pleasure/update/${this.entity}/${e._id}`})},handleCellClick(e,t,a){if(this.cellClick)return this.cellClick(e,t,a)}}};var L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{content:!0,"pleasure-table-edit":!0,"friendly-table":!0,"can-add":e.canAdd}},[a("el-table",{ref:"tb",staticClass:"the-table",style:e.tableStyle,attrs:{"default-sort":e.defaultSort,height:"100%",data:e.datatable,stripe:"","tooltip-effect":"dark","highlight-current-row":"","row-class-name":"pleasure-row","row-class-name":e.rowClassName},on:{"cell-click":e.handleCellClick,"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange}},[e.canDelete?a("el-table-column",{attrs:{type:"selection",width:"35"}}):e._e(),e._v(" "),e._l(e.fields,function(t){return a("el-table-column",{attrs:{prop:t,label:e.guessLabel(t),"min-width":"180",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(a.row[t]))]}}],null,!0)})})],2),e._v(" "),e.canAdd?a("el-button",{staticClass:"add-btn",attrs:{name:"add",icon:"el-icon-plus",circle:""},on:{click:e.promptCreate}}):e._e(),e._v(" "),0<e.selections.length&&e.canDelete?a("el-button",{staticClass:"delete-btn",attrs:{name:"delete",icon:"el-icon-minus",circle:""},on:{click:e.handleDeleteSelection}}):e._e()],1)};L._withStripped=!0;var F=g({render:L,staticRenderFns:[]},void 0,E,void 0,!1,void 0,void 0,void 0),T={components:{PleasureForm:$,PleasureFieldContainer:S,PleasureField:x,PleasureFormControls:I,PleasureTableEdit:F},props:{omit:{type:Array,default(){return[]}},multipleLines:{type:Boolean,default:!0},controller:{type:String,default:null},guessLabel:{type:Boolean,default:!0},guessPlaceholder:{type:Boolean,default:!0},actionLabel:{type:String,default:"Create"},autoLabelI18n:{type:Boolean,default:!0},autoPlaceholderI18n:{type:Boolean,default:!0},withControls:{type:Boolean,default:!0},i18nScope:{type:String,default:null,coerce(...e){return this.i18nScope?this.i18nScope:this.entity||"default"}},cancelLabel:{type:String,default:"Cancel"},method:{type:String,default:"create"},cancelable:{type:Boolean,default:!0},value:{type:Object,default(){return{}}},formName:{type:String,default:null},entity:{type:String,default:null},entryId:{type:String,default:null},partialUpdate:{type:Boolean,default:!1},customSchema:{type:Object,default:null},login:{type:Boolean,default:!1},autoload:{type:Boolean,default:!0},appendValues:{type:Object,default(){return{}}}},data(){return{componentWrapper:"el-form-item",values:s.all([this.values||{},this.value]),formId:"an-id",entryRead:!1,disabled:!1}},computed:{loaded(){return this.schema&&(!this.autoload||this.autoload&&this.entryRead)},schema(){if(!this.customSchema&&(!this.entity||!this.$pleasure.entities||!this.$pleasure.entities[this.entity]))return[];const e=this.customSchema||this.$pleasure.entities[this.entity],a=[];return t(e,(e,t)=>{/^[_$]/.test(t)||l(e,"options.options.virtual")||0<=this.omit.indexOf(t)||a.push(this.toPleasureField(d(e,{path:t})))}),a}},watch:{values:{handler(e){this.$emit("input",Object.assign({},e,this.appendValues))},deep:!0}},async mounted(){if(this.autoload){if(this.entryId)try{this.$set(this,"values",(await this.$pleasure.api.read(this.entity,this.entryId)))}catch(e){this.$pleasure.error(e.message)}this.entryRead=!0}},methods:{onCancel(){},toPleasureField(e){const t=a(e.path),l=[this.i18nScope?`${this.i18nScope}.placeholder.${t}`:null,this.i18nScope?`${this.i18nScope}.${t}`:null,`placeholders.${t}`].filter(e=>!!e),s=[this.i18nScope?`${this.i18nScope}.label.${t}`:null,this.i18nScope?`${this.i18nScope}.${t}`:null,`labels.${t}`].filter(e=>!!e);return e=d(e,{$pleasure:{}}),!e.$pleasure.hasOwnProperty("label")&&this.guessLabel&&(e.$pleasure.label=n(e.path)),!e.$pleasure.hasOwnProperty("placeholder")&&this.guessPlaceholder&&(e.$pleasure.placeholder=n(e.path)),!e.$pleasure.hasOwnProperty("label")&&this.autoLabelI18n&&(e.$pleasure.label=this.plsi18n(s,e.$pleasure.label)),!e.$pleasure.hasOwnProperty("placeholder")&&this.autoPlaceholderI18n&&(e.$pleasure.placeholder=this.plsi18n(l,e.$pleasure.placeholder)),e},performSubmit(){const e=Object.assign({},this.values,this.appendValues);if(this.controller)return this.$pleasure.api.controller(this.entity,this.controller,e);switch(this.method){case"create":return this.$pleasure.api.create(this.entity,e);case"update":return this.$pleasure.api.update(this.entity,this.entryId,e);}},async onSubmit(){try{this.login?await this.$pleasure.api.login(this.values):this.$emit("result",(await this.performSubmit()))}catch(e){this.$pleasure.error(e.message)}}}};var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{pleasure:!0,"multiple-lines":e.multipleLines}},[a("pleasure-form",{attrs:{disabled:e.disabled,"form-id":e.formId,"i18n-scope":e.i18nScope}},[e.loaded?e._l(e.schema,function(t){return a("pleasure-field-container",{key:e.formId+"-"+t.path,attrs:{"i18n-scope":e.i18nScope,field:t}},[a("pleasure-field",{attrs:{field:t,"i18n-scope":e.i18nScope,"form-values":e.values},model:{value:e.values[t.path],callback:function(a){e.$set(e.values,t.path,a)},expression:"values[field.path]"}})],1)}):e._e(),e._v(" "),e._t("default"),e._v(" "),e.loaded&&e.withControls?a("pleasure-form-controls",{attrs:{"v-bind":e.$props,"action-label":e.actionLabel,"cancel-label":e.cancelLabel,"action-callback":e.onSubmit,"cancel-callback":e.onCancel,cancelable:e.cancelable,method:e.method}}):e._e()],2)],1)};N._withStripped=!0;var D=g({render:N,staticRenderFns:[]},void 0,T,void 0,!1,void 0,void 0,void 0),M=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(t){var a;if(e.exports=t(),a=!0,!a){var n=window.Cookies,l=window.Cookies=t();l.noConflict=function(){return window.Cookies=n,l}}})(function(){function e(){for(var e,t=0,a={};t<arguments.length;t++)for(var n in e=arguments[t],e)a[n]=e[n];return a}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(n){function l(){}function s(t,a,s){if("undefined"!=typeof document){s=e({path:"/"},l.defaults,s),"number"==typeof s.expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var i=JSON.stringify(a);/^[\{\[]/.test(i)&&(a=i)}catch(t){}a=n.write?n.write(a,t):encodeURIComponent(a+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(t+"").replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var d="";for(var r in s)s[r]&&(d+="; "+r,!0!==s[r])&&(d+="="+s[r].split(";")[0]);return document.cookie=t+"="+a+d}}function i(e,a){if("undefined"!=typeof document){for(var l={},s=document.cookie?document.cookie.split("; "):[],d=0;d<s.length;d++){var r=s[d].split("="),o=r.slice(1).join("=");a||"\""!==o.charAt(0)||(o=o.slice(1,-1));try{var p=t(r[0]);if(o=(n.read||n)(o,p)||t(o),a)try{o=JSON.parse(o)}catch(t){}if(l[p]=o,e===p)break}catch(t){}}return e?l[e]:l}}return l.set=s,l.get=function(e){return i(e,!1)},l.getJSON=function(e){return i(e,!0)},l.remove=function(t,a){s(t,"",e(a,{expires:-1}))},l.defaults={},l.withConverter=a,l}return a(function(){})})});const q={};console.log(`pleasure-ui-vue/client`),process.client&&M.get("accessToken")&&(console.log(`auto loading access token`,M.get("accessToken")),q.accessToken=M.get("accessToken"));var A=r.PleasureApiClient.instance(q);A.debug(!0);const V={setLocale(e,t){e.locale=t},setDropdownLoading(e,t){0>e.dropdownLoading.indexOf(t)&&e.dropdownLoading.push(t)},removeDropdownLoading(e,t){const a=e.dropdownLoading.filter(e=>e!==t);o.set(e,"dropdownLoading",a)},setUser(e,t){o.set(e,"user",t)},setEntitiesSync(e,t){o.set(e,"entitiesSync",t)},setEntitiesSchema(e,a){t(a,e=>{t(e,(e,t)=>{/^\$/.test(t)||d(e,{$pleasure:{}})})}),o.set(e,"entitiesSchema",a)},setDropdown(e,{dropdownName:t,results:a}){o.set(e.dropdown,t,a)},updateDropdown(e,{entity:t,modified:a,id:n}){const i=l(e,`dropdown.${t}`),d=u(i,{_id:n});if(d){const e=s(d,a);o.set(i,i.indexOf(d),e)}},clearDropdowns(e){o.set(e,"dropdown",{})}},z={changeUserProfile({commit:e},t){return e("setUser",t)},async locale({commit:e},t){e("setlocale",t)},async dropdownChanged({commit:e},t={}){return e("updateDropdown",t)},async loadDropdown({commit:e,state:t},{entity:a,listOptions:n,name:l,force:i=!1,req:s}={}){if(s){const e=new p(s).get("accessToken");A.setCredentials({accessToken:e})}const d=a||l,r=c({entity:a,listOptions:n,dropdownName:d});if(0<=t.dropdownLoading.indexOf(r))return;if(!i&&t.dropdown[d])return t.dropdown[d];e("setDropdownLoading",r);let o,u;try{o=await A.list(a,n)}catch(t){u=t}if(e("setDropdown",{dropdownName:d,results:o}),e("removeDropdownLoading",r),u)throw u;return o},clearDropdowns({commit:e,state:t},{req:a}={}){return e("clearDropdowns")},logout(){return A.logout()},async syncEntities({commit:e,state:t},{force:a=!1}={}){if(!a&&0!==t.entitiesSync)return;e("setEntitiesSync",-1);let n;try{n=await A.getEntities()}catch(t){return void e("setEntitiesSync",0)}e("setEntitiesSchema",n),e("setEntitiesSync",1)}},U={entities(e){return e.entitiesSchema},dropdown(e){return e.dropdown},settings(e){return e.settings},user(e){return e.user},locale(e){return e.locale}};var B=Object.freeze({strict:!0,namespaced:!0,state:()=>({entitiesSync:0,entitiesSchema:{},dropdown:{},settings:process.env.$pleasure.settings||{},dropdownLoading:[],user:null,locales:["en","es"],locale:"en"}),mutations:V,actions:z,getters:U});class H{constructor({scope:t="pleasure",store:e,lifetime:a=1800}={}){this._store=e||window.sessionStorage,this._lifetime=1e3*a,this._scope=t,this._cached=[]}scope(e){return`${this._scope}-${e}`}req({id:e}){if(e){const t=this._store.getItem(this.scope(e));if(t){const{cached:a,res:n}=JSON.parse(t);return a+this._lifetime<=Date.now()?void this.clear(e):n}}}res({id:e,req:t,res:a}){if("undefined"!=typeof a&&"get"===t.method)return this._cached.push(e),this._store.setItem(this.scope(e),JSON.stringify({cached:Date.now(),res:a})),a}clear(e){this._store.removeItem(this.scope(e)),this._cached.splice(this._cached.indexOf(e),1)}clearAll(){for(;0<this._cached.length;)this.clear(this._cached[0])}}const Z=new o;var j={props:{initialZIndex:{type:Number,default:99}},data(){return{on:!1,full:!1,zIndex:this.initialZIndex,bindedResetFullState:this.resetFullState.bind(this)}},computed:{classes(){return{"back-drop":!0,full:this.full,on:this.on}}},mounted(){Z.$on("backdrop-on",this.open.bind(this)),Z.$on("backdrop-off",this.close.bind(this)),Z.$on("backdrop-toggle",this.toggle.bind(this))},methods:{resetFullState(){console.log(`resetFullState`),this.full=!1},open({zIndex:e,full:t}={}){this.$refs.backdrop.removeEventListener("animationend",this.bindedResetFullState),this.on=!0,this.zIndex=e||this.initialZIndex,this.full=!!t},close({zIndex:e}={}){this.$refs.backdrop.addEventListener("animationend",this.bindedResetFullState,{once:!0}),this.on=!1,this.zIndex=e||this.initialZIndex},toggle(e){this.on?this.close(e):this.open(e)}}};var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"backdrop",class:e.classes,style:{"z-index":e.zIndex}})};J._withStripped=!0;var W=g({render:J,staticRenderFns:[]},void 0,j,void 0,!1,void 0,void 0,void 0),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-full-height-container"},[e._t("header"),e._v(" "),e._t("default")],2)};G._withStripped=!0;var Q=g({render:G,staticRenderFns:[]},void 0,{},void 0,!1,void 0,void 0,void 0),X={props:{mainTitle:{type:String,default:""}},data(){return{title:this.mainTitle}},watch:{$route(){this.setTitle(this.mainTitle)}},mounted(){Z.$on("pleasure-headbar",({exec:e})=>{e&&this[e[0]](...e.slice(1))})},methods:{setTitle(e){this.title=e}}};var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"headbar"},[e._t("default",[e.title?a("h1",[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e()])],2)};Y._withStripped=!0;var K=g({render:Y,staticRenderFns:[]},void 0,X,void 0,!1,void 0,void 0,void 0),ee={props:{opened:{type:Boolean,default:!1},items:{type:Array,default:null}},data(){return{isOpen:this.opened}},computed:{cls(){return{menu:!0,open:this.isOpen}}},watch:{isOpen(e){this.$emit(e?"opened":"closed")}},methods:{toggle(){return this.isOpen=!this.isOpen},close(){this.isOpen=!1},open(){this.isOpen=!0}}};var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.cls},[e._t("head"),e._v(" "),a("el-menu",e._l(e.items,function(e,t){return a("pleasure-menu-item",{key:"menu-"+t,attrs:{index:"menu-"+t,item:e}})}),1)],2)};te._withStripped=!0;var ae=g({render:te,staticRenderFns:[]},void 0,ee,void 0,!1,void 0,void 0,void 0),ne={props:{sideNavigation:{type:Boolean,default:!1},state:{type:String,default:"open"}},data(){return{theState:this.state,theSideNavigation:this.sideNavigation}},computed:{cls(){return{"menu-bars":!0,"side-navigation":this.theSideNavigation,[`state-${this.theState}`]:!0}}},methods:{setState(e){return this.theState=e},setSideNavigation(e){return this.theSideNavigation=e}}};var le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bars",class:e.cls},[a("div"),e._v(" "),a("div")])};le._withStripped=!0;var se=g({render:le,staticRenderFns:[]},void 0,ne,void 0,!1,void 0,void 0,void 0),ie={name:"MenuItem",props:{index:{type:String,required:!0},item:{type:Object,required:!0}},computed:{hasChildren(){return this.item.children&&0<this.item.children.length},menuItemProps(){const e={};return this.hasChildren&&(e.index=this.item.name),e}}};var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-item"},[a(e.hasChildren?"el-submenu":"el-menu-item",{tag:"component",attrs:{index:e.index,"v-bind":e.menuItemProps}},[e.hasChildren?[a("template",{slot:"title"},[e.item.icon?a("i",{class:e.item.icon}):e._e(),e._v(" "),a("span",[e._v(e._s(e.item.name))])]),e._v(" "),e._l(e.item.children,function(t,n){return a("pleasure-menu-item",{key:e.item.name+"-"+n,attrs:{index:e.index+"-"+n,item:t}})})]:e.item.to?[a("nuxt-link",{attrs:{to:e.item.to}},[e._v("\n        "+e._s(e.item.name)+"\n      ")])]:[e._v("\n      "+e._s(e.item.name)+"\n    ")]],2)],1)};de._withStripped=!0;var re=g({render:de,staticRenderFns:[]},void 0,ie,void 0,!1,void 0,void 0,void 0),oe={props:{menuItems:{type:Array,default(){return[{name:"Hello"},{name:"My"},{name:"Friend",children:[{name:"Martin"}]}]}}},data(){return{menuOpened:!1}},watch:{$route(){this.closeMenu()}},mounted(){window.addEventListener("keydown",t=>{27===t.keyCode&&this.closeMenu()})},methods:{openMenu(){this.$refs.bars.setState("close"),this.$refs.bars.setSideNavigation(!0),this.$refs.backdrop.open({full:!0}),this.$refs.menu.open()},closeMenu(){this.$refs.bars.setState("open"),this.$refs.bars.setSideNavigation(!1),this.$refs.backdrop.close(),this.$refs.menu.close()},toggleMenu(){const e=this.$refs.menu.toggle();e?this.openMenu():this.closeMenu()}}};var pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mobile-app"},[a("pleasure-menu-bars",{ref:"bars",nativeOn:{click:function(t){return e.toggleMenu(t)}}}),e._v(" "),a("pleasure-menu",{ref:"menu",attrs:{items:e.menuItems},on:{opened:function(){e.menuOpened=!0},closed:function(){e.menuOpened=!1}}},[e._t("menu-head",null,{slot:"head"})],2),e._v(" "),a("pleasure-headbar",{class:{"pleasure-headbar-opener":!0,opened:e.menuOpened}}),e._v(" "),a("div",{staticClass:"headbar-background"}),e._v(" "),a("div",{class:{"mobile-app-body":!0,"pleasure-opener":!0,opened:e.menuOpened}},[a("pleasure-layout-mobile-app",[e._t("default",[a("h1",[e._v("Always our Pleasure!")])])],2)],1),e._v(" "),a("pleasure-backdrop",{ref:"backdrop",nativeOn:{click:function(t){return t.stopPropagation(),e.closeMenu(t)}}})],1)};pe._withStripped=!0;var ce=g({render:pe,staticRenderFns:[]},void 0,oe,void 0,!1,void 0,void 0,void 0),ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pleasure-layout-mobile-app"},[e._t("default")],2)};ue._withStripped=!0;var fe=g({render:ue,staticRenderFns:[]},void 0,{},void 0,!1,void 0,void 0,void 0),me=Object.freeze({PleasureBackdrop:W,PleasureFullHeightContainer:Q,PleasureHeadbar:K,PleasureLayoutDefault:ce,PleasureMenu:ae,PleasureMenuBars:se,PleasureMenuItem:re,PleasureLayoutMobileApp:fe,PleasureTableEdit:F});o.use(m);return e.default={install:y},e.pleasureApiClient=A,e}({},forOwn,kebabCase,startCase,get$1,merge,uniq,defaults,pleasureApiClient$1,Vue,Cookies,objectHash,find,CoercePropsMixin,VueI18n,Vuex);
