/*!
 * pleasure-ui-vue v1.0.0
 * (c) 2018-2019 Martin Rafael Gonzalez <tin@devtin.io>
 * Released under the MIT License.
 */
var ElementUiPleasure=function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';function m(a,b){let c=!0;return g(a,(a,d)=>{if(!f(a,h(b,d)))return c=!1,!1}),c}b=b&&b.hasOwnProperty("default")?b["default"]:b,c=c&&c.hasOwnProperty("default")?c["default"]:c,d=d&&d.hasOwnProperty("default")?d["default"]:d,e=e&&e.hasOwnProperty("default")?e["default"]:e,f=f&&f.hasOwnProperty("default")?f["default"]:f,g=g&&g.hasOwnProperty("default")?g["default"]:g,h=h&&h.hasOwnProperty("default")?h["default"]:h,i=i&&i.hasOwnProperty("default")?i["default"]:i,j=j&&j.hasOwnProperty("default")?j["default"]:j,k=k&&k.hasOwnProperty("default")?k["default"]:k,l=l&&l.hasOwnProperty("default")?l["default"]:l;var n={props:{i18nScope:{type:String,default:null},otherLabel:{type:String,default:"label.other"},otherPlaceholder:{type:String,default:"label.other"},otherAvailable:{type:Boolean,default:!1},pleasureValues:{type:Object,default:null},find:{type:Object,default:null},readonly:{type:Boolean,default:!1},sort:{type:Boolean,default:!0},value:{type:[Object,String,Number],default:null},options:{type:[String,Object,Array],default:null},name:{type:String,default:null},placeholder:{type:String,default:null},labelResolve:{type:Function,default:null},optionsMap:{type:Object,default(){return console.log(typeof this.options,this.options),{value:"value",label:"string"==typeof this.options?"value":"label"}}}},watch:{selected(a){":other:"===a&&(this.otherActive=!0,this.selected=null,this.$nextTick(()=>{this.$refs["manual-input"].focus()})),this.$emit("input",this.isNumber?+a||0:this.theValue(a)),this.setReadOnlyLabel()}},methods:{theLabel(a){const b=[`labels.${a}`,a];return this.i18nScope&&b.unshift(`${this.i18nScope}.label.${a}`),this.plsi18n(b,a)},theValue(a){return"object"==typeof a?h(a,this.optionsMap.value):a},getRealOptions(){let a,b=this.options;const c=a=>({value:this.getValue(a),label:this.label(a)});"string"==typeof b&&(b=this.$store.getters["pleasure/dropdown"][b],this.path&&(b=h(b,this.path))),a=Array.isArray(b)?b.map(c):d(b,c);let f=this.value;return"object"==typeof f&&(f=h(f,this.optionsMap?this.optionsMap.value:"_id")),this.sort&&a.sort((c,a)=>{const{labelA:b=""}=c,{labelB:d=""}=a;return b.toLowerCase()<d.toLowerCase()?-1:b.toLowerCase()>d.toLowerCase()?1:0}),this.selected=f,this.parsedFind&&(a=e(b,a=>m(this.parsedFind,a)).map(c)),a},setReadOnlyLabel(){const{selected:a}=this;"string"==typeof a&&0<this.realOptions.length&&console.log(`here`,{selected:a})},findOptionByValue(a){return c(this.realOptions,{value:a})},getValue(a){return"object"==typeof a?h(a,this.optionsMap.value):a},label(a){return this.labelResolve?this.labelResolve(a):"object"==typeof a?0<=this.optionsMap.label.indexOf("{")?k.render(this.optionsMap.label,a):(console.log(`label name`,this.optionsMap.label),h(a,this.optionsMap.label,this.selected)):a}},mounted(){this.setReadOnlyLabel(),this.$emit("input",this.theValue(this.value))},computed:{isNumber(){return"number"==typeof this.getValue(b(this.options)[0])},parsedFind(){return 1>j(this.find)?null:i(this.find,a=>{if(/^\$/.test(a)){const b=a.match(/^\$(.+)$/)[1];return h(this,"pleasureValues."+b)}return a})},key(){const a=[];return this.realOptions.forEach(b=>{a.push(b.label)}),l(a.join("-"))}},data(){let a=!1,b=this.theValue(this.value);return this.value&&this.otherAvailable&&!this.findOptionByValue(this.value)&&(a=!0,b=this.value),{selectedLabel:"",focused:!1,otherActive:a,selected:b,realOptions:this.getRealOptions()}}},o=function(a,b,c,d,e,f,g,h,i,j){"boolean"!=typeof g&&(i=h,h=g,g=!1);var k="function"==typeof c?c.options:c;a&&a.render&&(k.render=a.render,k.staticRenderFns=a.staticRenderFns,k._compiled=!0,e&&(k.functional=!0)),d&&(k._scopeId=d);var l;if(f?(l=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,a||"undefined"==typeof __VUE_SSR_CONTEXT__||(a=__VUE_SSR_CONTEXT__),b&&b.call(this,i(a)),a&&a._registeredComponents&&a._registeredComponents.add(f)},k._ssrRegister=l):b&&(l=g?function(){b.call(this,j(this.$root.$options.shadowRoot))}:function(a){b.call(this,h(a))}),l)if(k.functional){var m=k.render;k.render=function(a,b){return l.call(b),m(a,b)}}else{var n=k.beforeCreate;k.beforeCreate=n?[].concat(n,l):[l]}return c};var p=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{class:{"pleasure-select-container":!0,focused:a.focused}},[a.readonly||a.otherActive?a._e():[c("select",{key:a.key,staticClass:"pleasure-select",attrs:{name:a.name},on:{focus:function(){a.focused=!0},blur:function(){a.focused=!1},change:function(b){a.selected=b.target.value}}},[c("option",{attrs:{value:""}},[a._v("\n        [ "+a._s(a.placeholder)+" ]\n      ")]),a._v(" "),a._l(a.realOptions,function(b){return c("option",{key:b.value,domProps:{value:b.value,selected:a.selected===a.theValue(b.value)}},[a._v("\n        "+a._s(a.theLabel(b.label))+"\n      ")])}),a._v(" "),a.otherAvailable?c("option",{attrs:{value:":other:"}},[a._v("\n        "+a._s(a.$t(a.otherLabel))+"\n      ")]):a._e()],2)],a._v(" "),a.otherActive&&!a.readonly?c("el-input",{ref:"manual-input",attrs:{clearable:"",placeholder:a.$t(a.otherPlaceholder),value:a.selected},on:{input:function(b){a.selected=b},clear:function(){a.otherActive=!1},keyup:function(b){return!b.type.indexOf("key")&&a._k(b.keyCode,"esc",27,b.key,["Esc","Escape"])?null:void(a.otherActive=!1)},focus:function(){a.focused=!0},blur:function(){a.focused=!1}}}):a._e(),a._v(" "),a.readonly?c("el-input",{attrs:{readonly:"",value:a.selectedLabel}}):a._e()],2)};p._withStripped=!0;var q=o({render:p,staticRenderFns:[]},void 0,n,void 0,!1,void 0,void 0,void 0),r={props:{field:{type:Object,required:!0}},computed:{item(){return this.field.values.map(a=>({label:a,value:a}))}},data(){return{value:[]}}};var s=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("el-select",{attrs:{multiple:"",placeholder:"Select"},on:{input:function(b){return a.$emit("input",b)}},model:{value:a.value,callback:function(b){a.value=b},expression:"value"}},a._l(a.options,function(a){return c("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)};s._withStripped=!0;var t=o({render:s,staticRenderFns:[]},void 0,r,void 0,!1,void 0,void 0,void 0);const u=[];["AM","PM"].forEach(a=>{for(let b=1;12>=b;b++)u.push(`${b}${a}`)});var v={props:{value:{type:Object,default(){return{}}}},data(){return{schema:{date:{component:"Date",$pleasure:{label:""}},time:{enumValues:u,$pleasure:{label:""}}}}}};var w=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{staticClass:"pleasure-date-time"},[c("pleasure",{attrs:{"custom-schema":a.schema,"with-controls":!1},on:{input:function(b){return a.$emit("input",b)}}})],1)};w._withStripped=!0;var x=o({render:w,staticRenderFns:[]},void 0,v,void 0,!1,void 0,void 0,void 0);return a.install=function(a){a.mixin({components:{PleasureMultipleSelect:t,PleasureSelect:q,PleasureDateTime:x}})},a}({},castArray,find,map,filter,isEqual,forOwn,get,mapValues,size,mustache,md5);
